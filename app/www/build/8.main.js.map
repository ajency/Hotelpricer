{"version":3,"sources":["../../src/pages/login/login.module.ts","webpack:///./src/components/footer-element/footer-element.module.ts?285c*******","webpack:///./src/components/footer-element/footer-element.ts?a2fd*******","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"8.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\nimport { FooterElementComponentModule } from '../../components/footer-element/footer-element.module';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    FooterElementComponentModule,\n    IonicPageModule.forChild(LoginPage),\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { FooterElementComponent } from './footer-element';\n\n@NgModule({\n  declarations: [\n    FooterElementComponent,\n  ],\n  imports: [\n    IonicPageModule.forChild(FooterElementComponent),\n  ],\n  exports: [\n    FooterElementComponent\n  ]\n})\nexport class FooterElementComponentModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/footer-element/footer-element.module.ts","import { Component } from '@angular/core';\nimport { AppGlobals } from '../../providers/app-globals';\n/**\n * Generated class for the FooterElementComponent component.\n *\n * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html\n * for more info on Angular Components.\n */\n@Component({\n  selector: 'footer-element',\n  templateUrl: 'footer-element.html'\n})\nexport class FooterElementComponent {\n\n  private version: string = \"\";\n\n  constructor(private appglobals: AppGlobals) {\n    // console.log('Hello FooterElementComponent Component');\n    // this.text = 'Hello World';\n    this.version = this.appglobals.getAppVersion();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/footer-element/footer-element.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, PopoverController } from 'ionic-angular';\nimport { RepricerApi } from '../../providers/repricer-api';\nimport { AppGlobals } from '../../providers/app-globals';\nimport { AppService } from '../../providers/app-service';\n// import { Router } from '@angular/router';\nimport { CookieService } from 'ngx-cookie';\n\nimport { Storage } from '@ionic/storage';\nimport { AuthGuard } from '../../providers/auth-guard';\n\ndeclare var sessionStorage: any;\n\n@IonicPage({\n  name: 'login',\n  segment: 'login/:token',\n  priority: 'off'\n})\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  private loginFailMessage: string = `Somethings not right...`;\n  private keepLoggedIn: boolean = false;\n  private loginEmail: string = \"\";\n  private loginPass: string = \"\";\n  private loginFailed = false;\n  private loginInProcess: boolean = false;\n  private token: string;\n  private loginTokenFound: boolean = false;\n\n  constructor(\n    private repricerapi: RepricerApi,\n    private popctrl: PopoverController,\n    // private router: Router,\n    private storage: Storage,\n    private cookieservice:  CookieService,\n    private appglobals: AppGlobals,\n    private appservice: AppService,\n    private navCtrl: NavController,\n    private navparams: NavParams,\n    private authguard: AuthGuard) {\n      // this.navTo = this.appservice.navToPage;\n      this.token = this.navparams.get('token');\n  }\n\n  ngOnInit() {\n    console.log('ngOninit Login');\n  }\n\n  ionViewCanEnter(): Promise<boolean>{\n    console.log('ionviewcanenter login')\n    return new Promise((resolve,reject) => {\n      this.authguard.verifyToken('login')\n      .then(() => {\n        console.warn('login page not authorised')\n        reject(true)\n      })\n      .catch(() => {\n        resolve(true)\n      })\n    })\n\n  }\n\n  private loaderInstance: any;\n  ionViewDidEnter(){\n    console.log(\"ionViewDidEnter login\")\n    console.log(\"token => \",this.token);\n\n    if(this.token && this.token !== ':token'){\n      this.loaderInstance = this.appservice.showLoader();\n    }\n\n  }\n\n  ionViewWillUnload(){\n    if(this.loaderInstance){\n      this.loaderInstance.dismiss();\n    }\n  }\n\n  private validInputBeforeSubmit(event: any): void{\n\n    if(event.keyCode === 13){\n      if(this.loginEmail && this.loginPass){\n        this.signin();\n      }\n    }\n  }\n\n  private navTo(page,showloader: boolean = false){\n    console.log('navigating to page', page);\n    this.appservice.updateRootNav(page,true,{},showloader);\n  }\n\n  public signin(): void{\n\n    console.log(\"email => \" + this.loginEmail + \" pass => \" + this.loginPass + \" serverUrl => \");\n\n    if(!this.loginEmail && !this.loginPass){\n      this.loginFailed = true;\n      this.loginFailMessage = 'Username and Password cannot be blank';\n      return;\n    }\n\n    if(!this.loginEmail){\n      this.loginFailed = true;\n      this.loginFailMessage = 'Username cannot be blank';\n      return;\n    }\n\n    if(!this.loginPass){\n      this.loginFailed = true;\n       this.loginFailMessage = 'Password cannot be blank';\n      return;\n    }\n\n    this.loginInProcess = true;\n    this.repricerapi.login({username: this.loginEmail, password: this.loginPass},this.keepLoggedIn)\n    .then((response) => {\n      console.log(\"response\",response)\n      this.loginFailed = response;\n      if(!this.loginFailed){\n        this.navTo('dashboard',true);\n      }\n      this.loginInProcess = false;\n    })\n    .catch(e => {\n      // let errmess;\n      // try{\n      //   errmess = JSON.parse(e._body);\n      // }\n      // catch(e){\n      //   errmess = {message: 'network failed'};\n      // }\n      console.log(e);\n      this.loginFailMessage = e.message;\n      this.loginFailed = true;\n      this.loginInProcess = false;\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}