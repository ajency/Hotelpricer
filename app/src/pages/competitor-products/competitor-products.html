<ion-header class="hidden-xs">
  <ion-navbar no-padding>
  		<ion-title>
			<!--<ion-title>Pricer - Competitor Products</ion-title>-->
  			<div class="container">
  				<div class="header-main" padding-horizontal>
  					<!-- Main Nav tabs -->
  					<ul class="nav pri-menu pri-to-nav">
  						<!--<li class="visible-xs pri-menu__hb"> <ion-icon name="menu"></ion-icon></li>-->
						<li style="Width: 150px;" margin-right class="hidden-xs"><img src="../assets/img/browntape_logo.png" alt=""></li>
						<li class="pri-menu__title hasub"><h1>Tracker</h1></li>
  						<li class="pri-menu__wrap hidden-xs-inline-block">
  							<ul class="pri-menu__full">
								<li (click)="navTo('dashboard');"><a>Dashboard</a></li>
								<li (click)="navTo('import')"><a>Import</a></li> 
  								<li (click)="navTo('prices','all');"><a>Prices</a></li>
  								<li (click)="navTo('competitors');"><a>Competitors</a></li>
  								<!-- <li (click)="navTo('violations');"><a>Violations</a></li> -->
  								<!-- <li (click)="navTo('products');"><a>Products</a></li> -->
  								<!--<li (click)="navTo('pricingrule');"><a>Pricing Rules</a></li>-->
  							</ul>
  						</li>
  						<logout-popover>
						</logout-popover>
  					</ul>
  				</div>
  			</div>
  		</ion-title>
  	</ion-navbar>

</ion-header>


<ion-content (click)="hideAllFilters($event)" class="background-bt-grey-xs">
	<div class="container" padding-horizontal>
		<div class="back-to-link hidden-xs">
			<a (click)="navTo('competitors')" [hidden]="referer != 'competitors'"><ion-icon name="ios-arrow-back" ></ion-icon> Back to Competitors</a>
			<a (click)="navTo('violations')" [hidden]="referer == 'competitors'"><ion-icon name="ios-arrow-back" ></ion-icon> Back to Violations</a>
		</div>
		<div class="header-secondary replace-header">
			<ul class="nav pri-menu">
				<li (click)="goBack();" class="visible-xs pri-menu__hb"> <ion-icon name="ios-arrow-back"></ion-icon></li>
				<!-- <li class="pri-menu__title"><h2>Import product details from a CSV</h2></li> -->
				<li class="pri-menu__wrap marketplace-tabs show-white">
					<ul class="pri-menu__full">
						<li class="pri-menu__title"><h5 no-margin>Competitor Products</h5></li>
					</ul>
				</li>

				<!-- <li class="pri-menu__title"><h1>Competitor Products</h1></li> -->

				<li class="buttons-right hidden-xs">
					<ul class="pri-menu_full">
						<li><a class="" style="transition: none;">Export</a></li>
						<li padding-left>{{firstPageItem}} to {{lastPageItem}} of <strong>{{paginationConfig.totalItems}}</strong></li>
					</ul>
				</li>


			</ul>
		</div>

		<div class="filters flex">
			<div class="filters__search flex">
				<div class="bt-dropdown" [class.open]="filterOptions.search.open">
					<!-- .... On click of this button, add class "open" to the parent div "bt-dropdown" .... -->
					<!-- .... just adding the class will show the dropdown .... -->
					<!-- .... if any of the elements are selected then add class "filtered" to parent div "bt-dropdown" .... -->
					<button ion-button color="dark" outline no-margin class="bt-dropdown__btn button-drop btn-search" (click)="toggleDrop('search')">
						<ion-icon name="ios-search"></ion-icon> {{filterOptions.search.selectedname}}  <ion-icon name="ios-arrow-down"></ion-icon>
					</button>
					<div class="bt-dropdown__dd">
						<button ion-button color="dark" (click)="changeSearchField(field.slug)" *ngFor="let field of filterOptions.search.options" clear no-margin block class="bt-dropdown__btn button-drop">{{field.name}}</button>
					</div>
				</div>
				<input [(ngModel)]="filterOptions.search.value" (keyup)="searchItem($event)" type="text" class="form-control" placeholder="Type to search" padding-left>
			</div>
			<!-- .... On click of this button  ... -->
			<!-- .... toggle class "open" here ... -->
			<a class="filters__toggle" (click)="toggleFilterView()" [class.open]="!hideFilter"><img src="../assets/img/filter.png" alt=""></a>
			<!-- .... toggle class "hidden" for this one -->
			<div [class.hidden]="hideFilter" class="filters__wrap flex">

				<div class="bt-dropdown" [class.open]="filterOptions.attribute.open" [class.filtered]="filterOptions.attribute.filtered">
					<!-- .... On click of this button, add class "open" to the parent div "bt-dropdown" .... -->
					<!-- .... just adding the class will show the dropdown .... -->
					<button (click)="toggleDrop('attribute')" ion-button color="dark" outline no-margin class="bt-dropdown__btn button-drop">
						<span class="plusicon visible-xs-inline-block"></span> Attributes
							<!--<span [hidden]="!filterOptions.attribute.selectedname">&nbsp;({{filterOptions.attribute.selectedname}})</span>-->
						<ion-icon name="ios-arrow-down" class="hidden-xs icon-small"></ion-icon>
					</button>
					<div class="bt-dropdown__dd">
						<ion-list radio-group [(ngModel)]="filterOptions.attribute.selected" (ionChange)="updateFilter('attribute')">
							<ion-item *ngFor="let item of filterOptions.attribute.options">
								<ion-label no-padding>{{item.name}}</ion-label>
								<ion-radio color="green" no-padding value="{{item.slug}}"></ion-radio>
							</ion-item>
						</ion-list>
					</div>
				</div>

				<div class="bt-dropdown" [class.open]="filterOptions.marketplace_id.open" [class.filtered]="filterOptions.marketplace_id.filtered">
					<!-- .... On click of this button, add class "open" to the parent div "bt-dropdown" .... -->
					<!-- .... just adding the class will show the dropdown .... -->
					<button (click)="toggleDrop('marketplace_id')" ion-button color="dark" outline no-margin class="bt-dropdown__btn button-drop">
						<span class="plusicon visible-xs-inline-block"></span> Marketplaces
							<!--<span [hidden]="!filterOptions.marketplace_id.selectedname">&nbsp;({{filterOptions.marketplace_id.selectedname}})</span>-->
						<ion-icon name="ios-arrow-down" class="hidden-xs icon-small"></ion-icon>
					</button>
					<div class="bt-dropdown__dd">
						<ion-list radio-group [(ngModel)]="filterOptions.marketplace_id.selected" (ionChange)="updateFilter('marketplace_id')">
							<ion-item *ngFor="let item of filterOptions.marketplace_id.options">
								<ion-label no-padding>{{item.name}}</ion-label>
								<ion-radio color="green" no-padding value="{{item.slug}}"></ion-radio>
							</ion-item>
						</ion-list>
					</div>
				</div>

				<div class="bt-dropdown" [class.open]="filterOptions.sort.open" [class.filtered]="filterOptions.sort.filtered">
					<!-- .... On click of this button, add class "open" to the parent div "bt-dropdown" .... -->
					<!-- .... just adding the class will show the dropdown .... -->
					<button (click)="toggleDrop('sort')" ion-button color="dark" outline no-margin class="bt-dropdown__btn button-drop">
						<span class="plusicon visible-xs-inline-block"></span> Order by
							<!--<span [hidden]="!filterOptions.sort.selectedname">&nbsp;({{filterOptions.sort.selectedname}})</span>-->
						<ion-icon name="ios-arrow-down" class="hidden-xs icon-small"></ion-icon>
					</button>
					<div class="bt-dropdown__dd">
						<ion-list radio-group [(ngModel)]="filterOptions.sort.selected" (ionChange)="updateFilter('sort')">
							<ion-item *ngFor="let item of filterOptions.sort.options">
								<ion-label no-padding>{{item.name}}</ion-label>
								<ion-radio color="green" no-padding value="{{item.slug}}"></ion-radio>
							</ion-item>
						</ion-list>
					</div>
				</div>

				<div class="bt-dropdown" [class.open]="filterOptions.direction.open" [class.filtered]="filterOptions.direction.filtered">
					<!-- .... On click of this button, add class "open" to the parent div "bt-dropdown" .... -->
					<!-- .... just adding the class will show the dropdown .... -->
					<button (click)="toggleDrop('direction')" ion-button color="dark" outline no-margin class="bt-dropdown__btn button-drop">
						<span class="plusicon visible-xs-inline-block"></span> Direction
							<!--<span [hidden]="!filterOptions.direction.selectedname">&nbsp;({{filterOptions.direction.selectedname}})</span>-->
						<ion-icon name="ios-arrow-down" class="hidden-xs icon-small"></ion-icon>
					</button>
					<div class="bt-dropdown__dd">
						<ion-list radio-group [(ngModel)]="filterOptions.direction.selected" (ionChange)="updateFilter('direction')">
							<ion-item *ngFor="let item of filterOptions.direction.options">
								<ion-label no-padding>{{item.name}}</ion-label>
								<ion-radio color="green" no-padding value="{{item.slug}}"></ion-radio>
							</ion-item>
						</ion-list>
					</div>
				</div>

				<!--<button ion-button color="green" class="btn-apply" no-margin>Apply</button>-->
				<button (click)="resetFilter()" ion-button color="secondary" no-margin class="btn-reset" clear><ion-icon name="md-refresh" class="hidden-xs"></ion-icon><span class="visible-xs">Reset</span></button>
			</div>
		</div>

		<!-- table -->
		<div [hidden]="hideUniqueSeller" class="flex show-all-section" padding>

			<div>
				<div class="seller-name_col">
					<div class="flex">

						<div class="text-wrap" padding-right>
							<span class="marketplaces m-l-0" [ngClass]="{'m-amazon': sellerDetails.channel_id == '1','m-flipkart': sellerDetails.channel_id == '2', 'm-snapdeal': sellerDetails.channel_id == '3', 'm-paytm': sellerDetails.channel_id == '4'}"><span class="m-h"></span></span>
						</div>

						<div class="flex to-column">
							<div class="text-lighter">
								{{ filterOptions.attribute.selected == 'mop_violation' ? 'MOP violated' : (filterOptions.attribute.selected == 'mrp_violation' ? 'MRP violated' : 'All') }} products of
							</div>
							<div class="flex to-column-xs">
								<div class="text-wrap">
									<h6 class="prod-title" no-margin padding-right>
										<a target="blank" [href]="sellerDetails.seller_url" class="">{{sellerDetails.seller_name || naText}}</a>
									</h6>
								</div>

								<div>
									<star-ratings [stars]="sellerDetails.rating"></star-ratings>
									<span class="text-lighter" padding-left>{{sellerDetails.rating || naText}}</span>
								</div>
								<span padding-left class="text-lighter">( {{sellerDetails.rating_count ? sellerDetails.rating_count.toLocaleString() : 'No' }} ratings )</span>
							</div>

						</div>

					</div>
				</div>
			</div>


			<div class="show-all-link" text-wrap>
				<a (click)="showAllProducts()" >Show all products of this seller</a>
			</div>
		</div>

		<div class="tabular competitor-products">

			<div class="tabular__header flex hidden-xs">

				<div class="tabular__cell cell-9 t_product">Product</div>
				<div class="tabular__cell cell-1"></div>
				<div class="tabular__cell cell-4 t-seller">Seller</div>
				<div class="tabular__cell cell-1"></div>

				<div class="other-col flex cell-15">
					<div class="other-col__child cell-one-fourth">
						<div class="tabular__cell cell-full t-price">Price</div>
					</div>

					<div class="other-col__child cell-three-fourth flex">
						<div class="tabular__cell cell-10 fbm">FBM</div>
						<div class="tabular__cell cell-10 mop-violation">MOP Violation</div>
						<div class="tabular__cell cell-10 mrp-violation">MRP Violation</div>
					</div>
				</div>
			</div>

			<div class="tabular__row flex has-anim-loader" [hidden]="compProducts.length || listLoading == false" *ngFor="let dummy of dummyProducts">
				<div class="masked masked--competitor-products">
					<div class="masked__bg">
						<div class="masked__elements">
							<div class="masked__elem masked--1"></div>
							<div class="masked__elem masked--2"></div>
							<div class="masked__elem masked--3"></div>
							<div class="masked__elem masked--4"></div>
							<div class="masked__elem masked--5"></div>
							<div class="masked__elem masked--6"></div>
							<div class="masked__elem masked--7"></div>
							<div class="masked__elem masked--8"></div>
							<div class="masked__elem masked--9"></div>
							<div class="masked__elem masked--10"></div>
							<div class="masked__elem masked--11"></div>
							<div class="masked__elem masked--12"></div>
							<div class="masked__elem masked--13"></div>
							<div class="masked__elem masked--14"></div>
							<div class="masked__elem masked--15"></div>
							<div class="masked__elem masked--16"></div>
						</div>
					</div>
				</div>
			</div>

			<div class="tabular__row flex" [hidden]="listLoading || compProducts.length > 0 || compProductError" style="justify-content: center;">
				<strong>No records found</strong>
			</div>

			<div class="tabular__row flex" [hidden]="listLoading || compProducts.length > 0 || !compProductError" style="justify-content: center;">
				<strong>An error occured while loading competitor product results!</strong>
			</div>

			<div class="tabular__row flex" text-nowrap *ngFor="let item of compProducts | paginate: paginationConfig">
				<div class="tabular__cell cell-9 flex t-product">
					<div class="img-wrap" margin-right="" style="background-image: url()" [ngStyle]="{'background-image': 'url(' + (item.product_image || './assets/img/no-img.png') + ')'}">
						<!--<img alt="" width="65" [src]="item.product_image">-->
					</div>
					<div class="text-wrap">
						<span class="sku">{{item.listing_id || naText}}</span> <span class="marketplaces" [ngClass]="{'m-amazon': item.marketplace_id == '1','m-flipkart': item.marketplace_id == '2', 'm-snapdeal': item.marketplace_id == '3', 'm-paytm': item.marketplace_id == '4'}"><span class="m-h"></span></span>
						<h6 class="prod-title" no-margin=""><a target="blank" [href]="item.product_url">{{item.product_title || naText}}</a></h6>
					</div>
				</div>

				<div class="tabular__cell cell-1 hidden-xs"></div>

				<div class="tabular__cell cell-4 t-seller flex">
					<span class="visible-xs text-light-grey" padding-right>Seller</span>
					<span text-wrap>{{item.seller_name || naText}}</span>
				</div>

				<div class="other-col flex cell-1 hidden-xs"></div>

				<div class="other-col flex cell-15">
					<div class="other-col__child cell-one-fourth">
						<div class="tabular__cell cell-full t-price">
							<span class="price">
								<span class="rupee">₹</span><span class="amount">{{item.price ? item.price.toLocaleString() : naText}}</span>
								<!--<ion-badge color="success" text-uppercase="" class="badge badge-md badge-md-success">Lowest</ion-badge>-->
							</span>
							<!--<ion-badge class="bb badge badge-md badge-md-orange" color="orange" text-uppercase="">BB</ion-badge>-->
						</div>
					</div>

					<div class="other-col__child flex cell-three-fourth ">
						<div class="tabular__cell cell-10 fbm">
							<ion-icon [hidden]="!item.fullfilled_by_marketplace" name="checkmark" color="success" class="fw600 hidden-xs"></ion-icon>
							<!--<ion-icon [hidden]="item.fullfilled_by_marketplace" name="alert" color="danger" class="hidden-xs"></ion-icon>-->
							<ion-icon [hidden]="item.fullfilled_by_marketplace" name="close"  class="hidden-xs text-light-grey"></ion-icon>
							<ion-badge [hidden]="!item.fullfilled_by_marketplace" class="bb badge badge-md badge-md-success visible-xs" color="success" text-uppercase="">FBM</ion-badge>
						</div>

						<div class="tabular__cell cell-10 mop-violation">
							<!--<ion-icon [hidden]="!item.mop_violation" name="close" color="success"></ion-icon> -->

							<!-- <ion-icon [hidden]="item.mop_violation" name="checkmark" color="success" class="fw600 hidden-xs"></ion-icon> -->
							<span [hidden]="item.mop_violation" class="hidden-xs">--</span>
							<!-- <ion-icon [hidden]="!item.mop_violation" name="alert" color="danger" class="hidden-xs"></ion-icon> -->
							<img src="../assets/img/viol.png" [hidden]="!item.mop_violation" alt="" class="hidden-xs" name="alert">

							<!--<span class="hidden-xs">--</span>-->
							<ion-badge [hidden]="!item.mop_violation" class="bb badge badge-md badge-md-danger visible-xs" color="danger" text-uppercase="">MOP</ion-badge>
						</div>

						<div class="tabular__cell cell-10 mrp-violation">
							<!-- <ion-icon [hidden]="item.mrp_violation" name="checkmark" color="success" class="fw600 hidden-xs"></ion-icon> -->
							<!-- <ion-icon [hidden]="!item.mrp_violation" name="alert" color="danger" class="hidden-xs"></ion-icon> -->
              <span [hidden]="item.mrp_violation" class="hidden-xs">--</span>
							<img src="../assets/img/viol.png" [hidden]="!item.mrp_violation" alt="" class="hidden-xs" name="alert">
							<ion-badge [hidden]="!item.mrp_violation" class="bb badge badge-md badge-md-orange visible-xs" color="orange" text-uppercase="">MRP</ion-badge>
						</div>
					</div>
				</div>
			</div>

			<pagination-controls (pageChange)="pagChanged($event)" autoHide="true"></pagination-controls>
			<!--<div class="tabular__row flex" text-nowrap>
				<div class="tabular__cell cell-10 flex t-product">
					<div class="img-wrap" margin-right="" style="background-image: url()">
						<img alt="" width="65" src="https://images-eu.ssl-images-amazon.com/images/I/9121cJUKrPL._UY535_.jpg">
					</div>
					<div class="text-wrap">
						<span class="sku">B01N7FIMI2</span> <span class="marketplaces m-amazon"><span class="m-h"></span></span>
						<h6 class="prod-title" no-margin=""><a target="blank" href="http://www.amazon.in/dp/B01N7FIMI2">Hidesign Women's Shoulder Bag (Brown)</a></h6>
					</div>
				</div>

				<div class="tabular__cell cell-4 t-seller flex">
					<span class="visible-xs" padding-right>Seller</span>
					<span>WP Retails</span>
				</div>

				<div class="other-col flex cell-16">
					<div class="other-col__child cell-one-fourth">
						<div class="tabular__cell cell-full t-price">
							<span class="price">
								<span class="rupee">₹</span><span class="amount">3147</span>
								<ion-badge color="success" text-uppercase="" class="badge badge-md badge-md-success">Lowest</ion-badge>
							</span>
							<ion-badge class="bb badge badge-md badge-md-orange" color="orange" text-uppercase="">BB</ion-badge>
						</div>
					</div>

					<div class="other-col__child flex cell-three-fourth ">
						<div class="tabular__cell cell-10 fbm">
							 <ion-icon name="close" color="danger" class="fw600 hidden-xs"></ion-icon>
							<img src="../assets/img/viol.png" alt="" class="hidden-xs">
							<ion-badge class="bb badge badge-md badge-md-success visible-xs" color="success" text-uppercase="">FBM</ion-badge>
						</div>

						<div class="tabular__cell cell-10 mop-violation">
							 <ion-icon name="close" color="success"></ion-icon>
							<span class="hidden-xs">--</span>
							<ion-badge class="bb badge badge-md badge-md-danger visible-xs" color="danger" text-uppercase="">MOP</ion-badge>
						</div>

						<div class="tabular__cell cell-10 mrp-violation">
							 <ion-icon name="alert" color="danger" class="hidden-xs"></ion-icon>
							<img src="../assets/img/viol.png" alt="" class="hidden-xs">
							<ion-badge class="bb badge badge-md badge-md-orange visible-xs" color="orange" text-uppercase="">MRP</ion-badge>
						</div>
					</div>
				</div>
			</div>-->


		</div>
		<!-- /table -->
	</div>

</ion-content>
<ion-footer>
	<footer-element></footer-element>
</ion-footer>
